<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.3"/><style data-href="/my-blog/styles.1a303912f7f327089878.css" data-identity="gatsby-global-css">body{margin:0;padding:0}@font-face{font-family:taebaek;font-style:normal;font-weight:400;src:url(/my-blog/static/TAEBAEK-1f07c3ec4f67d3a56954563d9ccf1ed3.ttf) format("truetype")}@font-face{font-family:taebaek-milkyway;font-style:normal;font-weight:400;src:url(/my-blog/static/TAEBAEK-milkyway-be8807805a66e1365e5da8d62a854d67.ttf) format("truetype")}.ContentsTree-module--contentsTree__leaf--8208d{color:#fff;font-family:Consolas,monospace;font-size:2.5vh;font-weight:700;text-decoration:none}.Home-module--home--eeb12,.Home-module--home__main--2a0a1{display:flex;height:100vh;width:100vw}.Home-module--home__main--2a0a1{align-items:center;background-color:#000;background-image:linear-gradient(to top left,#28283c,#000014);flex-direction:column;justify-content:center}.Home-module--home__main__canvas--36a08{height:100vh;padding:2vh;position:fixed;width:100vw}.Home-module--home__main__titleBox--c2d57{align-items:flex-end;display:flex;flex-direction:column;height:90%;justify-content:flex-end;width:90%}.Home-module--home__main__titleBox__title--c4566{align-items:center;display:flex;flex-direction:column;z-index:1}.Home-module--home__main__titleBox__title__text--d1066,.Home-module--home__main__titleBox__title__text__vibration--cebde{color:#fff;font-family:taebaek;font-size:8vh;font-weight:700;padding-bottom:1vh;padding-top:1vh;z-index:1}.Home-module--home__main__titleBox__title__text__vibration--cebde{animation:Home-module--vibration--c3fd7 .1s infinite}@keyframes Home-module--vibration--c3fd7{0%{transform:rotate(1deg)}to{transform:rotate(-1deg)}}.Home-module--home__main__titleBox__title__contentsTree--7db75{height:0;opacity:0;overflow:hidden;transition:height .3s ease,opacity .5s ease-in}.Home-module--home__main__titleBox__title--c4566:hover>.Home-module--home__main__titleBox__title__contentsTree--7db75{height:55vh;opacity:1}.Home-module--home__main__titleBox__subtitle--05d67{color:#fff;font-family:taebaek-milkyway;font-size:5vh;font-weight:700;padding-bottom:2vh;padding-top:2vh;z-index:1}.Home-module--home__main__titleBox__contact--33deb{color:#fff;font-family:Consolas,monospace;font-size:3vh;font-weight:400;padding-top:1vh;text-decoration-line:none;z-index:1}.Home-module--home__main__titleBox__contact--33deb:hover{text-decoration:underline}.Navigator-module--navigator--6deb4{align-items:flex-start;display:flex;flex-direction:column;justify-content:center;padding-left:2vw;padding-top:2vh;position:fixed}.Navigator-module--navigator__title--3580b{color:#fff;font-family:taebaek;font-size:5vh;font-weight:700;padding-bottom:1vh;padding-top:1vh;text-decoration:none}.Post-module--post--83824{display:flex;justify-content:space-between}.Post-module--post__background--9bfff{background-image:linear-gradient(to top left,#28283c,#000014);height:100vh;position:fixed;width:100vw;z-index:-1}.Post-module--post__content--4d366{align-content:center;align-items:center;height:100%;width:100%}.Post-module--post__content__markdown--f2389{margin-left:30%;width:50%}.Post-module--post__content__markdown__title--f6def{color:#fff;font-size:5vh;font-weight:700;padding-bottom:3vh;padding-top:3vh}.Post-module--post__content__markdown__author--c2fcc,.Post-module--post__content__markdown__date--5506d{color:#fff;font-size:2.5vh;text-align:end}.PostList-module--postList--5fcc0{justify-content:space-between;width:100%}.PostList-module--postList__background--0a42f{background-image:linear-gradient(to top left,#28283c,#000014);height:100vh;position:fixed;width:100vw;z-index:-1}.PostList-module--postList__category--af01a{color:#fff;font-size:5vh;font-weight:700;margin-left:30%;padding-bottom:5vh;padding-left:2vw;padding-top:5vh}.PostList-module--postList__content--99772{align-content:center;align-items:center;margin-left:30%;width:50%}.PostList-module--postList__content__post--c72c0{border-bottom-color:#404040;border-bottom-style:solid;color:#d0d0d0;margin-left:1.5vw;padding-bottom:3vh;padding-top:3vh;width:95%}.PostList-module--postList__content__post__title--43639{color:#fff;font-size:2.5vh;font-weight:700;text-decoration:none}.PostList-module--postList__content__post__title--43639:hover{text-decoration:underline}.PostList-module--postList__content__post__excerpt--23e54{font-size:2vh;font-weight:400;line-height:160%;padding-bottom:2vh;padding-top:2vh}.PostList-module--postList__content__post__author--0fbc7,.PostList-module--postList__content__post__date--1f2f3{font-size:2vh;font-weight:400;text-align:end}</style></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Post-module--post--83824"><nav class="Navigator-module--navigator--6deb4"><a href="https://bill0077.github.io/my-blog" class="Navigator-module--navigator__title--3580b">bill0077.log</a><div><div class="ContentsTree-module--contentsTree__leaf--8208d">  │</div><div class="ContentsTree-module--contentsTree__leaf--8208d">  ├── ProblemSolving</div><div><a href="https://bill0077.github.io/my-blog/boj" class="ContentsTree-module--contentsTree__leaf--8208d">  │     └── boj </a></div><div class="ContentsTree-module--contentsTree__leaf--8208d">  │</div><div class="ContentsTree-module--contentsTree__leaf--8208d">  ├── SideProjects</div><div><a href="https://bill0077.github.io/my-blog/myblog-dev-log" class="ContentsTree-module--contentsTree__leaf--8208d">  │     ├── myblog-dev-log</a></div><div><a href="https://bill0077.github.io/my-blog/tadak-dev-log" class="ContentsTree-module--contentsTree__leaf--8208d">  │     └── tadak-dev-log</a></div><div class="ContentsTree-module--contentsTree__leaf--8208d">  │</div><div class="ContentsTree-module--contentsTree__leaf--8208d">  ├── Study</div><div><a href="https://bill0077.github.io/my-blog/devops" class="ContentsTree-module--contentsTree__leaf--8208d">  │     └── devops</a></div><div class="ContentsTree-module--contentsTree__leaf--8208d">  │</div><div><a href="https://bill0077.github.io/my-blog/etc" class="ContentsTree-module--contentsTree__leaf--8208d">  └── etc</a></div></div></nav><div class="Post-module--post__background--9bfff"></div><div class="Post-module--post__content--4d366"><div class="Post-module--post__content__markdown--f2389"><div class="Post-module--post__content__markdown__title--f6def">개발 블로그 개발기 - 2. 프로젝트 시작 &amp; Docker 설정</div><div class="Post-module--post__content__markdown__author--c2fcc">written by bill0077</div><div class="Post-module--post__content__markdown__date--5506d">date: 2024-01-21</div><p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]"><p style="color:white;display:inline;font-weight:bold" node="[object Object]">Demo: <a to="https://bill0077.github.io/my-blog" style="color:cadetblue;display:inline" href="https://bill0077.github.io/my-blog" node="[object Object]">https://bill0077.github.io/my-blog</a><br/>
Git commit: <a to="https://github.com/bill0077/my-blog/commit/79bdca8166fb45089fa90bd00b19134d70767741" style="color:cadetblue;display:inline" href="https://github.com/bill0077/my-blog/commit/79bdca8166fb45089fa90bd00b19134d70767741" node="[object Object]">https://github.com/bill0077/my-blog/commit/79bdca8166fb45089fa90bd00b19134d70767741</a></p></p>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">이번 글에서는 개발 블로그를 만드는 프로젝트의 첫 삽을 뜨고, 간단히 Docker를 설정해보도록 하겠다. 블로그는 react를 이용해 개발을 진행할 예정이다. 이름은 my-blog로 정하고 <code style="color:darkcyan">create-react-app</code>으로 프로젝트를 초기화했다.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-cmd" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>npx create-react-app my-blog</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">그리고 Docker와 git을 설정해보자.   나는 이 블로그 규모가 커지면 github page가 아니라 개인적으로 호스팅 할 계획이고 또 지금 사용하는 노트북을 언제 바꿀지 모르기 때문에 미래의 나를 위해 미리 Docker를 준비하기로 했다(github pages만 이용할 것이라면 어차피 <code style="color:darkcyan">npm run build</code>로 빌드된 결과를 github에서 호스팅하는 것이기 때문에 docker가 필수는 아니다). docker에 관한 내요은 나중에 따로 정리해보도록 하겠다(LINK 여기에서 확인해볼 수 있다).</p>
<h2 style="color:white" node="[object Object]">dockerfile 작성하기</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">docker을 설정하기 위해선 <code style="color:darkcyan">Dockerfile</code>을 작성해 주어야 한다. 결과부터 보자면 최종적으로 완성된 dockerfile은 아래와 같다. 해당 내용을 &quot;Dockerfile&quot; 이라는 이름으로 확장자 없이 프로젝트 디렉토리 최상단에 위치하면 된다 (이름이 바뀌면 build나 실행 시 여러 추가 설정이 필요하다).</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span># Dockerfile
</span>FROM node:18-alpine
<!-- -->
<!-- -->WORKDIR &quot;/usr/src/app&quot;
<!-- -->
<!-- -->COPY package.json package-lock.json ./
<!-- -->
<!-- -->RUN npm install --
<!-- -->
<!-- -->COPY ./ ./
<!-- -->
<!-- -->ENTRYPOINT [&quot;npm&quot;, &quot;start&quot;]</code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">이제 위 Dockerfile을 차근차근 살펴보자.</p>
<h2 style="color:white" node="[object Object]">1. BaseImage 지정하기 - FROM</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">Dockerfile은 <code style="color:darkcyan">BaseImage</code>를 설정하는 것으로 시작된다. 이는 환경을 처음부터 모두 직접 만드는 대신 기존의 세팅을 이용해 작업을 진행할 수 있도록 해준다. (이렇게 층층이 원하는 환경을 쌓는 것을 layering이라고 한다)</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>FROM node:18-alpine</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">FROM 다음의 node(react를 활용해 js 프로젝트를 만들 것이기 때문에 node 이용)는 이미지 명이고, 18은 버전, alpine은 최소단위의 Linux 버전을 말한다.</p>
<h2 style="color:white" node="[object Object]">2. 작업 경로 설정하기 - WORKDIR</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">현재 DockerImage에는 BaseImage만 존재하는 상태이다. 여기에 RUN, COPY 등의 명령어를 이용해 우리가 원하는 환경을 설정하기 위해서는 원하는 소스 코드를 복사하고, 필요한 라이브러리를 설치하는 등의 작업을 해야한다. 이때 해당 작업을 어떤 폴더에서 진행할지 (DockerImage 내부가 아닌 현재 개발 환경 기준)를 설정하기 위해 WORKDIR을 이용한다.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>WORKDIR &quot;/usr/src/app&quot;</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">WORKDIR을 이용해 작업할 폴더를 이동할 수 있다. (linux의 <code style="color:darkcyan">cd</code>와 같은 역할) Dockerfile의 이후 명령은 /usr/src/app 폴더에서 실행된다.</p>
<h2 style="color:white" node="[object Object]">3. 프로젝트 파일 복사하기 - COPY</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">다음으론 DockerImage 내부에서 사용할 프로젝트 파일을 복사해와야 한다. 이때 Dockerfile은 명령어 한 줄, 한 줄이 Layer 형식으로 실행된다. 따라서 변동성이 적은 파일을 우선 Layer로 깔아놓는 것이 추후에 DockerImage를 build할때 시간을 절약할 수 있다.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>COPY package.json package-lock.json ./</span></code></div></pre>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>COPY ./ ./</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">첫번째 COPY는 현재 디렉토리의 package.json, package-lock.json을 컨테이너의 ./로 복사하라는 의미를 가진다. 종속성은 변하지 않았는데도 소스코드가 변경될 때마다 DockerImage를 처음부터 다시 build 한다면 멀쩡한 환경을 다시 설정하느라 시간이 낭비될 것이다. 대신 환경에 영향을 미치는 package.json, package-lock.json를 먼저 layer로 쌓아 놓으면 이 단계까지는 cache되어 build 속도가 빨라진다. 이후 다시 모든 파일을 복사해 필요한 파일을 준비해준다.</p>
<h2 style="color:white" node="[object Object]">4. 라이브러리 설치하기 - RUN</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">그 후 RUN이라는 명령어를 통해서 <code style="color:darkcyan">npm install</code> 등을 실행하여 package.json에 명시되어있는 라이브러리를 모두 설치해준다.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>RUN npm install</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">이때 npm install 명령어를 사용하면 만약 package.json에 버전을 하나로 명시하지 않고 ^4.17.3 등으로 입력한 경우 해당 4.17.5, 4.17.6등의 버전이 설치될 수도 있으므로 버전 차이가 생길 수 있다. <code style="color:darkcyan">npm ci</code>를 이용하면 package-lock.json을 활용해 명확한 버전을 설치하기 때문에 위 문제를 해결할 수 있다. 나는 그냥 npm install을 이용했다. 라이브러리 설치 이외에도 RUN 명령문으로 할 수 있는 작업은 매우 다양하지만, 현재 상태에서는 이정도면 충분하다.</p>
<h2 style="color:white" node="[object Object]">4. 실행시키기 - ENTRYPOINT</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ENTRYPOINT는 해당 컨테이너가 수행될 때 특정 명령을 수행하도록 지정해주는 것이다. 비슷하게 <code style="color:darkcyan">CMD</code>가 있는데, CMD는 ENTRYPOINT처럼 고정된 명령이 아니라 container 실행시 필요에 따라 인자를 변경할 수 있다는 차이가 있다.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>ENTRYPOINT [&quot;npm&quot;, &quot;start&quot;]</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ENTRYPOINT라는 명령어를 사용해서 node라는 것을 실행할 것이고, index.js를 실행하는 명령어이다.</p>
<h2 style="color:white" node="[object Object]">.dockerignore</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]"><code style="color:darkcyan">.dockerignore</code>는 .gitignore과 비슷하게 필요없는 파일들은 DockerImage 속에 포함하지 않도록 명시해주는 파일이다. .dockerignore는 build 속도를 향상하고, 안전한 이미지를 최적화 하는 것에 도움을 준다 (실제로 .dockerfile을 작성하지 않으면 10분이 넘게 걸리던 build 과정이 .dockerignore 이후 40초 이내로 종료되었다 😲). Dockerfile과 마찬가지로 .dockerfile의 이름을 그대로 이용하도록 하자 (.dockerignore를 .Dockerignore로 잘못 써서 뭐가 문제인지 한참 고민을 했다).  node-modules, build, 및 .git, /gitignore, Dockerfile, .dockerignore, .md 등의   파일들은 컨테이너 환경에서는 전부 필요 없으므로 제외해주면 된다 (*를 통해 특정 확장자를 가진 모든 파일을 제거할 수 있다). 완성된 .dockerignore는 Dockerfile과 같이 프로젝트 최상위 디렉토리에 위치하면 된다.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span># .dockerignore
</span>node-modules
<!-- -->build
<!-- -->.git
<!-- -->.gitignore
<!-- -->Dockerfile
<!-- -->.dockerignore
<!-- -->*.md</code></div></pre>
<h1 style="color:white;border-bottom:solid" node="[object Object]">build 및 실행</h1>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]"><code style="color:darkcyan">Dockerfile</code> 및 <code style="color:darkcyan">.dockerignore</code>을 모두 작성했다면, 이제 build 명령어를 사용해서 이미지를 만들면 된다.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-cmd" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>docker build -f Dockerfile -t myblog-docker .</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">&quot;docker build -f <p style="color:white;display:inline;font-weight:bold" node="[object Object]">도커_파일_이름</p> -t <p style="color:white;display:inline;font-weight:bold" node="[object Object]">만들어질_이미지_이름</p> <p style="color:white;display:inline;font-weight:bold" node="[object Object]">필요한_파일의_상대위치</p>&quot; 의 형식에 맞춰 명령을 실행해주면 된다. 여기서는 image 이름을 myblog-docker로 지정하고 파일 위치는 현재 디렉토리임으로 위와 같은 명령을 실행하였다. 그러면 아래처럼 로그를 뿜으면서 이미지를 생성하게 된다.</p>
<center>
<img src="https://raw.githubusercontent.com/bill0077/my-blog/gh-pages/post-contents/myblog-dev-log/media/docker_building.png" width="80%" title="docker-building"/>
</center>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">react app의 경우 <code style="color:darkcyan">npm start</code> 명령어로 실행하게 되면 기본적으로 3000번 포트에서 실행된다. 그러므로 완성된 이미지를 -p 옵션으로 호스트의 포트 3000과 컨테이너의 포트 3000 간에 매핑을 생성하고 실행해보자. 이후 호스트의 브라우저에서 <a to="http://localhost:3000을" style="color:cadetblue;display:inline" href="http://localhost:3000%EC%9D%84" node="[object Object]">http://localhost:3000을</a> 열어 확인해 보면 잘 실행되는 것을 알 수 있다.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-cmd" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>docker run -p 3000:3000 myblog-docker</span></code></div></pre>
<h1 style="color:white;border-bottom:solid" node="[object Object]">reference</h1>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">잉여로운 개발일지, [Docker] Node 환경 만들기:
<a to="https://bum-developer.tistory.com/entry/Docker-Node-%ED%99%98%EA%B2%BD-%EB%A7%8C%EB%93%A4%EA%B8%B0" style="color:cadetblue;display:inline" href="https://bum-developer.tistory.com/entry/Docker-Node-%ED%99%98%EA%B2%BD-%EB%A7%8C%EB%93%A4%EA%B8%B0" node="[object Object]">https://bum-developer.tistory.com/entry/Docker-Node-%ED%99%98%EA%B2%BD-%EB%A7%8C%EB%93%A4%EA%B8%B0</a></p>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">DaleSeo, Dockerfile에서 자주 쓰이는 명령어: <a to="https://www.daleseo.com/dockerfile/" style="color:cadetblue;display:inline" href="https://www.daleseo.com/dockerfile/" node="[object Object]">https://www.daleseo.com/dockerfile/</a></p></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/myblog-dev-log/setting-docker/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-4dcf80b3ec3c1d7e90c0.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-4ec131227afe6d26b02a.js\"],\"component---src-pages-toy-projects-solar-system-js\":[\"/component---src-pages-toy-projects-solar-system-js-26c2bfa09265e4bde8c7.js\"],\"component---src-templates-post-js\":[\"/component---src-templates-post-js-1e0638dc97f9811b5b4b.js\"],\"component---src-templates-post-list-js\":[\"/component---src-templates-post-list-js-7f0c417f55c0bb11f326.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="bf84e23dddaa824c8654";</script><script src="/my-blog/webpack-runtime-78e8db40ba63a1f896dc.js" async></script><script src="/my-blog/framework-421aea1a5abe8c38ff0e.js" async></script><script src="/my-blog/app-4dcf80b3ec3c1d7e90c0.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>