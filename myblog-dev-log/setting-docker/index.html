<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.3"/><style data-href="/my-blog/styles.1a303912f7f327089878.css" data-identity="gatsby-global-css">body{margin:0;padding:0}@font-face{font-family:taebaek;font-style:normal;font-weight:400;src:url(/my-blog/static/TAEBAEK-1f07c3ec4f67d3a56954563d9ccf1ed3.ttf) format("truetype")}@font-face{font-family:taebaek-milkyway;font-style:normal;font-weight:400;src:url(/my-blog/static/TAEBAEK-milkyway-be8807805a66e1365e5da8d62a854d67.ttf) format("truetype")}.ContentsTree-module--contentsTree__leaf--8208d{color:#fff;font-family:Consolas,monospace;font-size:2.5vh;font-weight:700;text-decoration:none}.Home-module--home--eeb12,.Home-module--home__main--2a0a1{display:flex;height:100vh;width:100vw}.Home-module--home__main--2a0a1{align-items:center;background-color:#000;background-image:linear-gradient(to top left,#28283c,#000014);flex-direction:column;justify-content:center}.Home-module--home__main__canvas--36a08{height:100vh;padding:2vh;position:fixed;width:100vw}.Home-module--home__main__titleBox--c2d57{align-items:flex-end;display:flex;flex-direction:column;height:90%;justify-content:flex-end;width:90%}.Home-module--home__main__titleBox__title--c4566{align-items:center;display:flex;flex-direction:column;z-index:1}.Home-module--home__main__titleBox__title__text--d1066,.Home-module--home__main__titleBox__title__text__vibration--cebde{color:#fff;font-family:taebaek;font-size:8vh;font-weight:700;padding-bottom:1vh;padding-top:1vh;z-index:1}.Home-module--home__main__titleBox__title__text__vibration--cebde{animation:Home-module--vibration--c3fd7 .1s infinite}@keyframes Home-module--vibration--c3fd7{0%{transform:rotate(1deg)}to{transform:rotate(-1deg)}}.Home-module--home__main__titleBox__title__contentsTree--7db75{height:0;opacity:0;overflow:hidden;transition:height .3s ease,opacity .5s ease-in}.Home-module--home__main__titleBox__title--c4566:hover>.Home-module--home__main__titleBox__title__contentsTree--7db75{height:55vh;opacity:1}.Home-module--home__main__titleBox__subtitle--05d67{color:#fff;font-family:taebaek-milkyway;font-size:5vh;font-weight:700;padding-bottom:2vh;padding-top:2vh;z-index:1}.Home-module--home__main__titleBox__contact--33deb{color:#fff;font-family:Consolas,monospace;font-size:3vh;font-weight:400;padding-top:1vh;text-decoration-line:none;z-index:1}.Home-module--home__main__titleBox__contact--33deb:hover{text-decoration:underline}.Navigator-module--navigator--6deb4{align-items:flex-start;display:flex;flex-direction:column;justify-content:center;padding-left:2vw;padding-top:2vh;position:fixed}.Navigator-module--navigator__title--3580b{color:#fff;font-family:taebaek;font-size:5vh;font-weight:700;padding-bottom:1vh;padding-top:1vh;text-decoration:none}.Post-module--post--83824{display:flex;justify-content:space-between}.Post-module--post__background--9bfff{background-image:linear-gradient(to top left,#28283c,#000014);height:100vh;position:fixed;width:100vw;z-index:-1}.Post-module--post__content--4d366{align-content:center;align-items:center;height:100%;width:100%}.Post-module--post__content__markdown--f2389{margin-left:30%;width:50%}.Post-module--post__content__markdown__title--f6def{color:#fff;font-size:5vh;font-weight:700;padding-bottom:3vh;padding-top:3vh}.Post-module--post__content__markdown__author--c2fcc,.Post-module--post__content__markdown__date--5506d{color:#fff;font-size:2.5vh;text-align:end}.PostList-module--postList--5fcc0{justify-content:space-between;width:100%}.PostList-module--postList__background--0a42f{background-image:linear-gradient(to top left,#28283c,#000014);height:100vh;position:fixed;width:100vw;z-index:-1}.PostList-module--postList__category--af01a{color:#fff;font-size:5vh;font-weight:700;margin-left:30%;padding-bottom:5vh;padding-left:2vw;padding-top:5vh}.PostList-module--postList__content--99772{align-content:center;align-items:center;margin-left:30%;width:50%}.PostList-module--postList__content__post--c72c0{border-bottom-color:#404040;border-bottom-style:solid;color:#d0d0d0;margin-left:1.5vw;padding-bottom:3vh;padding-top:3vh;width:95%}.PostList-module--postList__content__post__title--43639{color:#fff;font-size:2.5vh;font-weight:700;text-decoration:none}.PostList-module--postList__content__post__title--43639:hover{text-decoration:underline}.PostList-module--postList__content__post__excerpt--23e54{font-size:2vh;font-weight:400;line-height:160%;padding-bottom:2vh;padding-top:2vh}.PostList-module--postList__content__post__author--0fbc7,.PostList-module--postList__content__post__date--1f2f3{font-size:2vh;font-weight:400;text-align:end}</style></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Post-module--post--83824"><nav class="Navigator-module--navigator--6deb4"><a href="https://bill0077.github.io/my-blog" class="Navigator-module--navigator__title--3580b">bill0077.log</a><div><div class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”‚</div><div class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”œâ”€â”€ ProblemSolving</div><div><a href="https://bill0077.github.io/my-blog/boj" class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”‚Â Â Â Â Â â””â”€â”€ boj </a></div><div class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”‚</div><div class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”œâ”€â”€ SideProjects</div><div><a href="https://bill0077.github.io/my-blog/myblog-dev-log" class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”‚Â Â Â Â Â â”œâ”€â”€ myblog-dev-log</a></div><div><a href="https://bill0077.github.io/my-blog/tadak-dev-log" class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”‚Â Â Â Â Â â””â”€â”€ tadak-dev-log</a></div><div class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”‚</div><div class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”œâ”€â”€ Study</div><div><a href="https://bill0077.github.io/my-blog/devops" class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”‚Â Â Â Â Â â””â”€â”€ devops</a></div><div class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â”‚</div><div><a href="https://bill0077.github.io/my-blog/etc" class="ContentsTree-module--contentsTree__leaf--8208d">Â Â â””â”€â”€ etc</a></div></div></nav><div class="Post-module--post__background--9bfff"></div><div class="Post-module--post__content--4d366"><div class="Post-module--post__content__markdown--f2389"><div class="Post-module--post__content__markdown__title--f6def">ê°œë°œ ë¸”ë¡œê·¸ ê°œë°œê¸° - 2. í”„ë¡œì íŠ¸ ì‹œì‘ &amp; Docker ì„¤ì •</div><div class="Post-module--post__content__markdown__author--c2fcc">written by bill0077</div><div class="Post-module--post__content__markdown__date--5506d">date: 2024-01-21</div><p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]"><p style="color:white;display:inline;font-weight:bold" node="[object Object]">Demo: <a to="https://bill0077.github.io/my-blog" style="color:cadetblue;display:inline" href="https://bill0077.github.io/my-blog" node="[object Object]">https://bill0077.github.io/my-blog</a><br/>
Git commit: <a to="https://github.com/bill0077/my-blog/commit/79bdca8166fb45089fa90bd00b19134d70767741" style="color:cadetblue;display:inline" href="https://github.com/bill0077/my-blog/commit/79bdca8166fb45089fa90bd00b19134d70767741" node="[object Object]">https://github.com/bill0077/my-blog/commit/79bdca8166fb45089fa90bd00b19134d70767741</a></p></p>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ì´ë²ˆ ê¸€ì—ì„œëŠ” ê°œë°œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“œëŠ” í”„ë¡œì íŠ¸ì˜ ì²« ì‚½ì„ ëœ¨ê³ , ê°„ë‹¨íˆ Dockerë¥¼ ì„¤ì •í•´ë³´ë„ë¡ í•˜ê² ë‹¤. ë¸”ë¡œê·¸ëŠ” reactë¥¼ ì´ìš©í•´ ê°œë°œì„ ì§„í–‰í•  ì˜ˆì •ì´ë‹¤. ì´ë¦„ì€ my-blogë¡œ ì •í•˜ê³  <code style="color:darkcyan">create-react-app</code>ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í–ˆë‹¤.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-cmd" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>npx create-react-app my-blog</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ê·¸ë¦¬ê³  Dockerì™€ gitì„ ì„¤ì •í•´ë³´ì.   ë‚˜ëŠ” ì´ ë¸”ë¡œê·¸ ê·œëª¨ê°€ ì»¤ì§€ë©´ github pageê°€ ì•„ë‹ˆë¼ ê°œì¸ì ìœ¼ë¡œ í˜¸ìŠ¤íŒ… í•  ê³„íšì´ê³  ë˜ ì§€ê¸ˆ ì‚¬ìš©í•˜ëŠ” ë…¸íŠ¸ë¶ì„ ì–¸ì œ ë°”ê¿€ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ë¯¸ë˜ì˜ ë‚˜ë¥¼ ìœ„í•´ ë¯¸ë¦¬ Dockerë¥¼ ì¤€ë¹„í•˜ê¸°ë¡œ í–ˆë‹¤(github pagesë§Œ ì´ìš©í•  ê²ƒì´ë¼ë©´ ì–´ì°¨í”¼ <code style="color:darkcyan">npm run build</code>ë¡œ ë¹Œë“œëœ ê²°ê³¼ë¥¼ githubì—ì„œ í˜¸ìŠ¤íŒ…í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— dockerê°€ í•„ìˆ˜ëŠ” ì•„ë‹ˆë‹¤). dockerì— ê´€í•œ ë‚´ìš”ì€ ë‚˜ì¤‘ì— ë”°ë¡œ ì •ë¦¬í•´ë³´ë„ë¡ í•˜ê² ë‹¤(LINK ì—¬ê¸°ì—ì„œ í™•ì¸í•´ë³¼ ìˆ˜ ìˆë‹¤).</p>
<h2 style="color:white" node="[object Object]">dockerfile ì‘ì„±í•˜ê¸°</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">dockerì„ ì„¤ì •í•˜ê¸° ìœ„í•´ì„  <code style="color:darkcyan">Dockerfile</code>ì„ ì‘ì„±í•´ ì£¼ì–´ì•¼ í•œë‹¤. ê²°ê³¼ë¶€í„° ë³´ìë©´ ìµœì¢…ì ìœ¼ë¡œ ì™„ì„±ëœ dockerfileì€ ì•„ë˜ì™€ ê°™ë‹¤. í•´ë‹¹ ë‚´ìš©ì„ &quot;Dockerfile&quot; ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ í™•ì¥ì ì—†ì´ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìµœìƒë‹¨ì— ìœ„ì¹˜í•˜ë©´ ëœë‹¤ (ì´ë¦„ì´ ë°”ë€Œë©´ buildë‚˜ ì‹¤í–‰ ì‹œ ì—¬ëŸ¬ ì¶”ê°€ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤).</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span># Dockerfile
</span>FROM node:18-alpine
<!-- -->
<!-- -->WORKDIR &quot;/usr/src/app&quot;
<!-- -->
<!-- -->COPY package.json package-lock.json ./
<!-- -->
<!-- -->RUN npm install --
<!-- -->
<!-- -->COPY ./ ./
<!-- -->
<!-- -->ENTRYPOINT [&quot;npm&quot;, &quot;start&quot;]</code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ì´ì œ ìœ„ Dockerfileì„ ì°¨ê·¼ì°¨ê·¼ ì‚´í´ë³´ì.</p>
<h2 style="color:white" node="[object Object]">1. BaseImage ì§€ì •í•˜ê¸° - FROM</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">Dockerfileì€ <code style="color:darkcyan">BaseImage</code>ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘ëœë‹¤. ì´ëŠ” í™˜ê²½ì„ ì²˜ìŒë¶€í„° ëª¨ë‘ ì§ì ‘ ë§Œë“œëŠ” ëŒ€ì‹  ê¸°ì¡´ì˜ ì„¸íŒ…ì„ ì´ìš©í•´ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤. (ì´ë ‡ê²Œ ì¸µì¸µì´ ì›í•˜ëŠ” í™˜ê²½ì„ ìŒ“ëŠ” ê²ƒì„ layeringì´ë¼ê³  í•œë‹¤)</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>FROM node:18-alpine</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">FROM ë‹¤ìŒì˜ node(reactë¥¼ í™œìš©í•´ js í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ ê²ƒì´ê¸° ë•Œë¬¸ì— node ì´ìš©)ëŠ” ì´ë¯¸ì§€ ëª…ì´ê³ , 18ì€ ë²„ì „, alpineì€ ìµœì†Œë‹¨ìœ„ì˜ Linux ë²„ì „ì„ ë§í•œë‹¤.</p>
<h2 style="color:white" node="[object Object]">2. ì‘ì—… ê²½ë¡œ ì„¤ì •í•˜ê¸° - WORKDIR</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">í˜„ì¬ DockerImageì—ëŠ” BaseImageë§Œ ì¡´ì¬í•˜ëŠ” ìƒíƒœì´ë‹¤. ì—¬ê¸°ì— RUN, COPY ë“±ì˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ ìš°ë¦¬ê°€ ì›í•˜ëŠ” í™˜ê²½ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ì›í•˜ëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ë³µì‚¬í•˜ê³ , í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ í•´ì•¼í•œë‹¤. ì´ë•Œ í•´ë‹¹ ì‘ì—…ì„ ì–´ë–¤ í´ë”ì—ì„œ ì§„í–‰í• ì§€ (DockerImage ë‚´ë¶€ê°€ ì•„ë‹Œ í˜„ì¬ ê°œë°œ í™˜ê²½ ê¸°ì¤€)ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ WORKDIRì„ ì´ìš©í•œë‹¤.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>WORKDIR &quot;/usr/src/app&quot;</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">WORKDIRì„ ì´ìš©í•´ ì‘ì—…í•  í´ë”ë¥¼ ì´ë™í•  ìˆ˜ ìˆë‹¤. (linuxì˜ <code style="color:darkcyan">cd</code>ì™€ ê°™ì€ ì—­í• ) Dockerfileì˜ ì´í›„ ëª…ë ¹ì€ /usr/src/app í´ë”ì—ì„œ ì‹¤í–‰ëœë‹¤.</p>
<h2 style="color:white" node="[object Object]">3. í”„ë¡œì íŠ¸ íŒŒì¼ ë³µì‚¬í•˜ê¸° - COPY</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ë‹¤ìŒìœ¼ë¡  DockerImage ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  í”„ë¡œì íŠ¸ íŒŒì¼ì„ ë³µì‚¬í•´ì™€ì•¼ í•œë‹¤. ì´ë•Œ Dockerfileì€ ëª…ë ¹ì–´ í•œ ì¤„, í•œ ì¤„ì´ Layer í˜•ì‹ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤. ë”°ë¼ì„œ ë³€ë™ì„±ì´ ì ì€ íŒŒì¼ì„ ìš°ì„  Layerë¡œ ê¹”ì•„ë†“ëŠ” ê²ƒì´ ì¶”í›„ì— DockerImageë¥¼ buildí• ë•Œ ì‹œê°„ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>COPY package.json package-lock.json ./</span></code></div></pre>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>COPY ./ ./</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ì²«ë²ˆì§¸ COPYëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ package.json, package-lock.jsonì„ ì»¨í…Œì´ë„ˆì˜ ./ë¡œ ë³µì‚¬í•˜ë¼ëŠ” ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤. ì¢…ì†ì„±ì€ ë³€í•˜ì§€ ì•Šì•˜ëŠ”ë°ë„ ì†ŒìŠ¤ì½”ë“œê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ DockerImageë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ build í•œë‹¤ë©´ ë©€ì©¡í•œ í™˜ê²½ì„ ë‹¤ì‹œ ì„¤ì •í•˜ëŠë¼ ì‹œê°„ì´ ë‚­ë¹„ë  ê²ƒì´ë‹¤. ëŒ€ì‹  í™˜ê²½ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” package.json, package-lock.jsonë¥¼ ë¨¼ì € layerë¡œ ìŒ“ì•„ ë†“ìœ¼ë©´ ì´ ë‹¨ê³„ê¹Œì§€ëŠ” cacheë˜ì–´ build ì†ë„ê°€ ë¹¨ë¼ì§„ë‹¤. ì´í›„ ë‹¤ì‹œ ëª¨ë“  íŒŒì¼ì„ ë³µì‚¬í•´ í•„ìš”í•œ íŒŒì¼ì„ ì¤€ë¹„í•´ì¤€ë‹¤.</p>
<h2 style="color:white" node="[object Object]">4. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜í•˜ê¸° - RUN</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ê·¸ í›„ RUNì´ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ <code style="color:darkcyan">npm install</code> ë“±ì„ ì‹¤í–‰í•˜ì—¬ package.jsonì— ëª…ì‹œë˜ì–´ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ëª¨ë‘ ì„¤ì¹˜í•´ì¤€ë‹¤.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>RUN npm install</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ì´ë•Œ npm install ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ë§Œì•½ package.jsonì— ë²„ì „ì„ í•˜ë‚˜ë¡œ ëª…ì‹œí•˜ì§€ ì•Šê³  ^4.17.3 ë“±ìœ¼ë¡œ ì…ë ¥í•œ ê²½ìš° í•´ë‹¹ 4.17.5, 4.17.6ë“±ì˜ ë²„ì „ì´ ì„¤ì¹˜ë  ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ ë²„ì „ ì°¨ì´ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. <code style="color:darkcyan">npm ci</code>ë¥¼ ì´ìš©í•˜ë©´ package-lock.jsonì„ í™œìš©í•´ ëª…í™•í•œ ë²„ì „ì„ ì„¤ì¹˜í•˜ê¸° ë•Œë¬¸ì— ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ë‚˜ëŠ” ê·¸ëƒ¥ npm installì„ ì´ìš©í–ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ì´ì™¸ì—ë„ RUN ëª…ë ¹ë¬¸ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ì‘ì—…ì€ ë§¤ìš° ë‹¤ì–‘í•˜ì§€ë§Œ, í˜„ì¬ ìƒíƒœì—ì„œëŠ” ì´ì •ë„ë©´ ì¶©ë¶„í•˜ë‹¤.</p>
<h2 style="color:white" node="[object Object]">4. ì‹¤í–‰ì‹œí‚¤ê¸° - ENTRYPOINT</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ENTRYPOINTëŠ” í•´ë‹¹ ì»¨í…Œì´ë„ˆê°€ ìˆ˜í–‰ë  ë•Œ íŠ¹ì • ëª…ë ¹ì„ ìˆ˜í–‰í•˜ë„ë¡ ì§€ì •í•´ì£¼ëŠ” ê²ƒì´ë‹¤. ë¹„ìŠ·í•˜ê²Œ <code style="color:darkcyan">CMD</code>ê°€ ìˆëŠ”ë°, CMDëŠ” ENTRYPOINTì²˜ëŸ¼ ê³ ì •ëœ ëª…ë ¹ì´ ì•„ë‹ˆë¼ container ì‹¤í–‰ì‹œ í•„ìš”ì— ë”°ë¼ ì¸ìë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ëŠ” ì°¨ì´ê°€ ìˆë‹¤.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>ENTRYPOINT [&quot;npm&quot;, &quot;start&quot;]</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ENTRYPOINTë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ nodeë¼ëŠ” ê²ƒì„ ì‹¤í–‰í•  ê²ƒì´ê³ , index.jsë¥¼ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´ì´ë‹¤.</p>
<h2 style="color:white" node="[object Object]">.dockerignore</h2>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]"><code style="color:darkcyan">.dockerignore</code>ëŠ” .gitignoreê³¼ ë¹„ìŠ·í•˜ê²Œ í•„ìš”ì—†ëŠ” íŒŒì¼ë“¤ì€ DockerImage ì†ì— í¬í•¨í•˜ì§€ ì•Šë„ë¡ ëª…ì‹œí•´ì£¼ëŠ” íŒŒì¼ì´ë‹¤. .dockerignoreëŠ” build ì†ë„ë¥¼ í–¥ìƒí•˜ê³ , ì•ˆì „í•œ ì´ë¯¸ì§€ë¥¼ ìµœì í™” í•˜ëŠ” ê²ƒì— ë„ì›€ì„ ì¤€ë‹¤ (ì‹¤ì œë¡œ .dockerfileì„ ì‘ì„±í•˜ì§€ ì•Šìœ¼ë©´ 10ë¶„ì´ ë„˜ê²Œ ê±¸ë¦¬ë˜ build ê³¼ì •ì´ .dockerignore ì´í›„ 40ì´ˆ ì´ë‚´ë¡œ ì¢…ë£Œë˜ì—ˆë‹¤ ğŸ˜²). Dockerfileê³¼ ë§ˆì°¬ê°€ì§€ë¡œ .dockerfileì˜ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì´ìš©í•˜ë„ë¡ í•˜ì (.dockerignoreë¥¼ .Dockerignoreë¡œ ì˜ëª» ì¨ì„œ ë­ê°€ ë¬¸ì œì¸ì§€ í•œì°¸ ê³ ë¯¼ì„ í–ˆë‹¤).  node-modules, build, ë° .git, /gitignore, Dockerfile, .dockerignore, .md ë“±ì˜   íŒŒì¼ë“¤ì€ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œëŠ” ì „ë¶€ í•„ìš” ì—†ìœ¼ë¯€ë¡œ ì œì™¸í•´ì£¼ë©´ ëœë‹¤ (*ë¥¼ í†µí•´ íŠ¹ì • í™•ì¥ìë¥¼ ê°€ì§„ ëª¨ë“  íŒŒì¼ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤). ì™„ì„±ëœ .dockerignoreëŠ” Dockerfileê³¼ ê°™ì´ í”„ë¡œì íŠ¸ ìµœìƒìœ„ ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜í•˜ë©´ ëœë‹¤.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-Dockerfile" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span># .dockerignore
</span>node-modules
<!-- -->build
<!-- -->.git
<!-- -->.gitignore
<!-- -->Dockerfile
<!-- -->.dockerignore
<!-- -->*.md</code></div></pre>
<h1 style="color:white;border-bottom:solid" node="[object Object]">build ë° ì‹¤í–‰</h1>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]"><code style="color:darkcyan">Dockerfile</code> ë° <code style="color:darkcyan">.dockerignore</code>ì„ ëª¨ë‘ ì‘ì„±í–ˆë‹¤ë©´, ì´ì œ build ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ë©´ ëœë‹¤.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-cmd" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>docker build -f Dockerfile -t myblog-docker .</span></code></div></pre>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">&quot;docker build -f <p style="color:white;display:inline;font-weight:bold" node="[object Object]">ë„ì»¤_íŒŒì¼_ì´ë¦„</p> -t <p style="color:white;display:inline;font-weight:bold" node="[object Object]">ë§Œë“¤ì–´ì§ˆ_ì´ë¯¸ì§€_ì´ë¦„</p> <p style="color:white;display:inline;font-weight:bold" node="[object Object]">í•„ìš”í•œ_íŒŒì¼ì˜_ìƒëŒ€ìœ„ì¹˜</p>&quot; ì˜ í˜•ì‹ì— ë§ì¶° ëª…ë ¹ì„ ì‹¤í–‰í•´ì£¼ë©´ ëœë‹¤. ì—¬ê¸°ì„œëŠ” image ì´ë¦„ì„ myblog-dockerë¡œ ì§€ì •í•˜ê³  íŒŒì¼ ìœ„ì¹˜ëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì„ìœ¼ë¡œ ìœ„ì™€ ê°™ì€ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì˜€ë‹¤. ê·¸ëŸ¬ë©´ ì•„ë˜ì²˜ëŸ¼ ë¡œê·¸ë¥¼ ë¿œìœ¼ë©´ì„œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê²Œ ëœë‹¤.</p>
<center>
<img src="https://raw.githubusercontent.com/bill0077/my-blog/gh-pages/post-contents/myblog-dev-log/media/docker_building.png" width="80%" title="docker-building"/>
</center>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">react appì˜ ê²½ìš° <code style="color:darkcyan">npm start</code> ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ 3000ë²ˆ í¬íŠ¸ì—ì„œ ì‹¤í–‰ëœë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì™„ì„±ëœ ì´ë¯¸ì§€ë¥¼ -p ì˜µì…˜ìœ¼ë¡œ í˜¸ìŠ¤íŠ¸ì˜ í¬íŠ¸ 3000ê³¼ ì»¨í…Œì´ë„ˆì˜ í¬íŠ¸ 3000 ê°„ì— ë§¤í•‘ì„ ìƒì„±í•˜ê³  ì‹¤í–‰í•´ë³´ì. ì´í›„ í˜¸ìŠ¤íŠ¸ì˜ ë¸Œë¼ìš°ì €ì—ì„œ <a to="http://localhost:3000ì„" style="color:cadetblue;display:inline" href="http://localhost:3000%EC%9D%84" node="[object Object]">http://localhost:3000ì„</a> ì—´ì–´ í™•ì¸í•´ ë³´ë©´ ì˜ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-cmd" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>docker run -p 3000:3000 myblog-docker</span></code></div></pre>
<h1 style="color:white;border-bottom:solid" node="[object Object]">reference</h1>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">ì‰ì—¬ë¡œìš´ ê°œë°œì¼ì§€, [Docker] Node í™˜ê²½ ë§Œë“¤ê¸°:
<a to="https://bum-developer.tistory.com/entry/Docker-Node-%ED%99%98%EA%B2%BD-%EB%A7%8C%EB%93%A4%EA%B8%B0" style="color:cadetblue;display:inline" href="https://bum-developer.tistory.com/entry/Docker-Node-%ED%99%98%EA%B2%BD-%EB%A7%8C%EB%93%A4%EA%B8%B0" node="[object Object]">https://bum-developer.tistory.com/entry/Docker-Node-%ED%99%98%EA%B2%BD-%EB%A7%8C%EB%93%A4%EA%B8%B0</a></p>
<p style="color:#D0D0D0;font-size:2.5vh;line-height:160%" node="[object Object]">DaleSeo, Dockerfileì—ì„œ ìì£¼ ì“°ì´ëŠ” ëª…ë ¹ì–´: <a to="https://www.daleseo.com/dockerfile/" style="color:cadetblue;display:inline" href="https://www.daleseo.com/dockerfile/" node="[object Object]">https://www.daleseo.com/dockerfile/</a></p></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/myblog-dev-log/setting-docker/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-4dcf80b3ec3c1d7e90c0.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-4ec131227afe6d26b02a.js\"],\"component---src-pages-toy-projects-solar-system-js\":[\"/component---src-pages-toy-projects-solar-system-js-26c2bfa09265e4bde8c7.js\"],\"component---src-templates-post-js\":[\"/component---src-templates-post-js-1e0638dc97f9811b5b4b.js\"],\"component---src-templates-post-list-js\":[\"/component---src-templates-post-list-js-7f0c417f55c0bb11f326.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="bf84e23dddaa824c8654";</script><script src="/my-blog/webpack-runtime-78e8db40ba63a1f896dc.js" async></script><script src="/my-blog/framework-421aea1a5abe8c38ff0e.js" async></script><script src="/my-blog/app-4dcf80b3ec3c1d7e90c0.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>